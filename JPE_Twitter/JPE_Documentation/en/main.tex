\documentclass[report]{article}
\usepackage{pagecolor,lipsum}
\usepackage{ragged2e}
\usepackage{graphicx}
\usepackage{subcaption}
\usepackage{enumitem}
\usepackage[none]{hyphenat}

\usepackage{tocloft}

\input{oppsett}

\title{JPE\_Twitter} % tittel
\newcommand{\subtitle}{Splunk App for Twitter Mining} % undertittel
%\newcommand{\sammendrag}{Sammendrag legges inn her. \lipsum*[2]} % sammendrag
\newcommand{\sammendrag}{\justify This document was made, designed and wrote uniquely to general understand of JPE\_Twitter application, so it can't be edited and distribute whitout the written authorization of the author.}
\newcommand{\notatnummer}{May 2019} % dato for rapport (erstatter notatnummer)

\author{%
    Juan Alejandro P\'erez Chand\'ia \\
    Computer Engineering\\
    jalejandro.ingeniero@gmail.com
}

\newcommand{\hoydestrek}{125pt} % kommer an på antall forfattere

\definecolor{text}{HTML}{D5D5D5}
\definecolor{background}{HTML}{222222}

\usepackage{caption}
\usepackage[font={color=text,bf},figurename=Fig.]{caption}

	
\usepackage{geometry}
\geometry{top=2cm, bottom=2cm}
\input{preforside}

\pagestyle{fancy}
 
\fancyfoot{}
\renewcommand{\footrulewidth}{0pt}
\renewcommand{\headrulewidth}{0pt}
% \fancyfoot[RO,LE]{\centering \color{text}\thepage}
\fancyfoot[R]{\centering \color{text}\thepage}
\fancyhead{}
\fancyhead[L]{}
\fancyhead[C]{}

\date{\today}




% 			S T A R T   D O C U M E N T
\begin{document}
\renewcommand*\contentsname{\color{skde}Contents}
\pagecolor{background}
\color{text}
\sloppy 

\input{forside}
\addtocounter{page}{1}
% \begin{large}

\section{Introduction}
JPE\_Twitter is a Splunk Application developed in Python, whose purpose is the Twitter Mining and complete integration with the log analysis tool previously mentioned. With JPE\_Twitter you'll can extract of Twitter important information based on words filter, phrases, hashtag, among other and get data indicate what's happening with our business or service on Twitter, building a development base to sentiment analysis on Twitter.
\newpage
\tableofcontents
\thispagestyle{empty}

\newpage
\section{Basic concepts of development}

The application is developed in Python 2.7, with the purpose of sharing the Python base installation of the Splunk platform (6.x or higher) and has five essential modules:
\newline
\begin{itemize}
\item {\bf config :} The application has a configuration file called \textit{twitter.conf}, where config module can read and write the necessary parameter to the authentication with Twitter API, log files configuration, encrypt, among others.

\item {\bf security :} For the security of confidential data (authentication token), this module has what it needs to encrypt and decrypt, based on the key that the user defines in the configuration of the tokens in Splunk.

\item {\bf splunk\_read :} The purpose of this modules is take all parameters entered from the Splunk platform and take them to the corresponding module (config, security, service, among others).

\item {\bf service :} Responsible to start, stop and restart the service, besides to obtain its status.

\item {\bf twitter :} Corresponding to the main module, who will return everything filtered on Twitter.
\newline
\end{itemize}

Besides, JPE\_Twitter has its own log files, [for | to] make process debug through Splunk or directly looking at log files: 
\newline
\begin{itemize}
\item {\bf config.log :} Show the ran process by \textit{config} module, including its problem (if there are any).

\item {\bf service.log :} Show the service state and its PID, besides include problems that this service could have.

\item {\bf twitter.log :} Show the authentication state with Twitter API and filtered messages from this social network.

\item {\bf splunk\_read.log :} Show the ran process by \textit{splunk\_read} module, including its problem (if there are any).
\newline
\end{itemize}

\begin{figure}[h!]
	\centering
	\includegraphics[scale=0.33]{img/arquitectura.PNG}
	\caption{\color{text}JPE\_Twitter General Diagram}
\end{figure}

\textit{\small \textbf{Important:} All necessary libraries to proper running of aplication, is includes on the installation package.}
\newpage
\subsection{Dashboards}

For administration of Twitter listener process it exists three important dashboard, that allow configure the authentication tokens and filters, besides allow start, stop and restart service or verificate its status:
\newline
\begin{itemize}
\item Token and Security
\item Filter
\item Service
\newline
\end{itemize}

And also have with three basic dashboard, that allow show Twitter general information base on the filters configurated, such as user with most followers, hashtag the most used and users mention:
\newline
\begin{itemize}
\item Twitter Users
\item Twitter Hashtag
\item Twitter Comments
\newline
\end{itemize}

\subsubsection{Token and Security}

This dashboard allow to configure the authentication tokens of Twitter API, which are: \textit{consumer key, consumer secret, access token and access secret}. This tokens are stored in configuration file \textit{twitter.conf} and security concern, the authentication tokens can be encrypted to prevent that other people access to them, only is necessary to write an encryption key in the same panel, after to indicate that you want to encrypt the tokens.
\newline
\begin{figure}[h!]
	\centering
	\includegraphics[scale=0.2]{img/token.png}
	\caption{\color{text}Setting: Token and Security Dashboard}
\end{figure}
It is important consider that: to obtein tokens, it must create a developer account on Twitter (\url{https://developer.twitter.com})
\newpage
\subsubsection{Filter}

Este dashboard permite configurar los filtros que se aplicar\'an en el proceso de escucha. Las opciones de configuraci\'n incluyen la acci\'on de agregar nuevo filtro al que se encuentra actualmente configurado o configurar nuevos filtros reemplazando a los anteriores, mediante la elecci\'on de \textit{add o new} respectivamente.\\ Los filtros ingresados pueden ser palabras, frases, hashtag, entre otros y deben ser separados por una coma.
\newline
\begin{figure}[h!]
	\centering
	\includegraphics[scale=0.2]{img/filter.png}
	\caption{\color{text}Setting: filter Dashboard}
\end{figure}

\subsubsection{Service}

Este dashboard permite ejecutar acciones sobre el servicio de Twitter. La opción Start permite iniciar el servicio y comenzar a indexar data obtenida desde Twitter y como requisito previo, se requiere tener configurado los Token de autenticación y los filtros. La opción Stop es la encargada de detener el servicio. La opción Restart permite reiniciar el servicio si es requerido por desarrollos propios u otras razones. La opcion Status indica si el servicio se encuentra activo o detenido.
\newline
\begin{figure}[h!]
	\centering
	\includegraphics[scale=0.2]{img/service.png}
	\caption{\color{text}Setting: Service Dashboard}
\end{figure}


\subsubsection{Twitter Users}

Este dashboard presenta información relacionada a usuarios de la red social, tales como: cantidad de seguidores, nombre, alias y ubicación. Sobre el mismo dashboard se pueden aplicar desarrollos para obtener informaci\'on adicional.
\newline
\begin{figure}[h!]
	\centering
	\includegraphics[scale=0.2]{img/user.png}
	\caption{\color{text}Twitter User Dashboard}
\end{figure}

\subsubsection{Twitter Hashtag}

Este dashboard presenta informaci\'on relacionada a los hashtag m\'as usados durante el d\'ia. Sobre el mismo dashboard se pueden aplicar desarrollos para obtener informaci\'on adicional.
\newline
\begin{figure}[h!]
	\centering
	\includegraphics[scale=0.2]{img/hashtag.png}
	\caption{\color{text}Twitter Hashtag Dashboard}
\end{figure}

\newpage

\subsubsection{Twitter Comments}

Esta dashboard presenta el detalle de los usuarios m\'as comentados del d\'ia, comentarios realizados e informaci\'on del usuario. Sobre el mismo dashboard se pueden aplicar desarrollos para obtener informaci\'on adicional.
\newline
\begin{figure}[h!]
	\centering
	\includegraphics[scale=0.2]{img/comments.png}
	\caption{\color{text}Twitter Comments Dashboard}
\end{figure}

\newpage

\section{Instalaci\'on}

JPE\_Twitter esta probado en versiones 6.x de Splunk o superior y fue desarrollado en Splunk 7, el cual ser\'a usado en la gu\'ia de instalaci\'on.\\
\\
Considerando que la aplicaci\'on ya se encuentra descargada, debes seguir los siguuentes pasos:
\newline
\begin{enumerate}[label=(\alph*)]
\item Hacer click en el apartado superi\'or izquierdo de la plataforma Splunk, que dice \textbf{App: Search \& Reporting} > \textbf{Manage Apps}
\item Hacer click en el extremo superior derecho de la plataforma, en el bot\'on \textbf{Install Apps from File}
\item Hacer click en \textbf{Examine} y seleccionar JPE\_Twitter.zip, luego hacer click en \textbf{Upload}
\newline
\end{enumerate}

\begin{figure}[h!]
  \centering
  \begin{subfigure}[b]{0.49\linewidth}
    \includegraphics[width=\linewidth]{img/a.png}
     \caption{\color{text} Manage Apps}
  \end{subfigure}
  \begin{subfigure}[b]{0.49\linewidth}
    \includegraphics[width=\linewidth]{img/b.png}
    \caption{\color{text} Install Apps from File}
  \end{subfigure}
  \begin{subfigure}[b]{0.49\linewidth}
    \includegraphics[width=\linewidth]{img/c.png}
    \caption{\color{text} Upload}
  \end{subfigure}
  \caption{\color{text} Instalaci\'on de la aplicaci\'on JPE\_Twitter}
  \label{fig:instalacion}
\end{figure}

Con estos simples pasos, JPE\_Twitter se encontrar\'a instalado. La recomendaci\'on pos-instalaci\'on es reiniciar Splunk.
\newpage
\section{Validaciones}

Para la validaci\'on de la instalaci\'on se deben seguir los siguientes pasos:
\newline

\begin{enumerate}[label=(\alph*)]
\item Hacer click en el apartado superior derecho de la plataforma, en la secci\'on \textbf{Setting > Indexes}
\item Validar que exista el index \textbf{twitter}
\item Hacer click en \textbf{Setting > Source Types} y validar que existan los source types \textbf{twitter, setting} y \textbf{service}
\newline
\end{enumerate}

\begin{figure}[h!]
  \centering
  \begin{subfigure}[b]{0.49\linewidth}
    \includegraphics[width=\linewidth]{img/f.png}
     \caption{\color{text} Setting: Index - Sourcetype}
  \end{subfigure}
  \begin{subfigure}[b]{0.49\linewidth}
    \includegraphics[width=\linewidth]{img/d.png}
    \caption{\color{text} Index}
  \end{subfigure}
  \begin{subfigure}[b]{0.49\linewidth}
    \includegraphics[width=\linewidth]{img/e.png}
    \caption{\color{text} Sourcetype}
  \end{subfigure}
  \caption{\color{text} Validaciones}
  \label{fig:validacion}
\end{figure}

\textbf{Index twitter: }Es el repositorio de datos del aplicativo instalado.\\
\textbf{Source Type twitter: }Identifica la estructura de los datos filtrados de Twitter.\\
\textbf{Source Type service: }Identifica la estructura de los datos generador por el m\'odulo \textit{service.py}\\
\textbf{Source Type setting: }Identifica la estructura de los datos generador por los m\'odulos \textit{twitter.py} y \textit{security.py}
\newline
\section{Soporte, consultas o comentarios}

\textbf{Nombre: }Juan Alejandro P\'erez Chand\'ia\\
\textbf{E-Mail: }jalejandro.ingeniero@gmail.com\\
\textbf{Idioma: }Espa\~nol - Ingl\'es
% \end{large}
\end{document}
